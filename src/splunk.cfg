<match **>
  type splunkapi
  protocol rest
  server splunk-forwarder.logging.svc.cluster.local:8089
  auth admin:changeme

  # host: 'host' parameter passed to Splunk
  # host YOUR-HOSTNAME

  # host: 'source' parameter passed to Splunk
  # default: {TAG}
  #
  # "{TAG}" will be replaced by fluent tags at runtime
  source {TAG}

  sourcetype fluent
  time_format localtime
  format json
  buffer_type memory
  buffer_queue_limit 16
  buffer_chunk_limit 8m

  # flush_interval: The interval of API requests.
  #
  # Make sure that this value is sufficiently large to make successive API calls.
  # Note that a different 'source' creates a different API POST, each of which may
  # take two or more seconds.  If you include "{TAG}" in the source parameter and
  # this 'match' section recieves many tags, a single flush may take long time.
  # (Run fluentd with -v to see verbose logs.)
  flush_interval 180s
</match>
